<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Session 11: Writing Algorithms in Pythonâ€”Part II (OOP) | CS110</title>

  <!-- KaTeX -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <style>
    :root {
      --background: #FFFFFF;
      --background-secondary: #F7F6F3;
      --text-primary: #37352F;
      --text-secondary: #6B6B6B;
      --accent: #2EAADC;
      --accent-hover: #2596be;
      --border: #E9E9E7;
      --code-bg: #F7F6F3;
      --highlight: #FBF3DB;
      --success: #0F7B6C;
      --error: #EB5757;
      --warning: #F59E0B;
      --purple: #9B51E0;
      --canvas-bg: #1a1a2e;
      --shadow: 0 1px 3px rgba(0,0,0,0.08);
      --class-color: #E74C3C;
      --instance-color: #3498DB;
      --method-color: #2ECC71;
      --attr-color: #F39C12;

      --font-main: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --font-mono: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
      --border-radius: 8px;
      --card-padding: 1.5rem;
    }

    [data-theme="dark"] {
      --background: #191919;
      --background-secondary: #252525;
      --text-primary: #E6E6E6;
      --text-secondary: #9B9B9B;
      --border: #333333;
      --code-bg: #252525;
      --highlight: #3D3A2E;
      --shadow: 0 1px 3px rgba(0,0,0,0.3);
      --canvas-bg: #0d0d1a;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-main);
      background: var(--background);
      color: var(--text-primary);
      line-height: 1.7;
      transition: background 0.3s, color 0.3s;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 2rem;
    }

    /* Theme Toggle */
    .theme-toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 1000;
      background: var(--background-secondary);
      border: 1px solid var(--border);
      border-radius: 50%;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 1.25rem;
      transition: all 0.2s ease;
      box-shadow: var(--shadow);
    }

    .theme-toggle:hover {
      transform: scale(1.1);
    }

    /* Header */
    header {
      margin-bottom: 2rem;
      padding-bottom: 2rem;
      border-bottom: 1px solid var(--border);
    }

    .session-badge {
      display: inline-block;
      background: var(--accent);
      color: white;
      padding: 0.25rem 0.75rem;
      border-radius: 4px;
      font-size: 0.875rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
    }

    h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      color: var(--text-secondary);
      font-size: 1.125rem;
    }

    .meta {
      display: flex;
      gap: 1.5rem;
      margin-top: 1rem;
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    h2 {
      font-size: 1.75rem;
      font-weight: 600;
      margin-top: 3rem;
      margin-bottom: 1rem;
    }

    h3 {
      font-size: 1.25rem;
      font-weight: 600;
      margin-top: 2rem;
      margin-bottom: 0.75rem;
    }

    p {
      margin-bottom: 1rem;
    }

    code {
      font-family: var(--font-mono);
      background: var(--code-bg);
      padding: 0.125rem 0.375rem;
      border-radius: 4px;
      font-size: 0.875em;
    }

    /* Learning Objectives */
    .objectives {
      background: var(--background-secondary);
      border-radius: var(--border-radius);
      padding: var(--card-padding);
      margin-bottom: 2rem;
    }

    .objectives ul {
      list-style: none;
      padding-left: 0;
    }

    .objectives li {
      padding: 0.5rem 0;
      padding-left: 1.75rem;
      position: relative;
    }

    .objectives li::before {
      content: '\2713';
      position: absolute;
      left: 0;
      color: var(--success);
      font-weight: 600;
    }

    /* Visualization Container */
    .viz-container {
      border: 1px solid var(--border);
      border-radius: var(--border-radius);
      padding: var(--card-padding);
      margin: 1.5rem 0;
      background: var(--background);
      box-shadow: var(--shadow);
    }

    .viz-canvas {
      width: 100%;
      min-height: 300px;
      background: var(--canvas-bg);
      border-radius: var(--border-radius);
      position: relative;
      overflow: hidden;
      padding: 1.5rem;
    }

    /* Class Builder */
    .class-builder {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
    }

    .builder-panel {
      background: var(--background-secondary);
      border-radius: var(--border-radius);
      padding: 1rem;
    }

    .builder-panel h4 {
      margin-bottom: 1rem;
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-secondary);
    }

    .builder-input-group {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 0.75rem;
    }

    .builder-input-group input {
      flex: 1;
      padding: 0.5rem 0.75rem;
      border: 1px solid var(--border);
      border-radius: var(--border-radius);
      background: var(--background);
      color: var(--text-primary);
      font-family: var(--font-mono);
      font-size: 0.875rem;
    }

    .builder-input-group select {
      padding: 0.5rem;
      border: 1px solid var(--border);
      border-radius: var(--border-radius);
      background: var(--background);
      color: var(--text-primary);
      font-size: 0.875rem;
    }

    .builder-input-group button {
      padding: 0.5rem 0.75rem;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 0.875rem;
      transition: background 0.2s;
    }

    .builder-input-group button:hover {
      background: var(--accent-hover);
    }

    .item-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      max-height: 200px;
      overflow-y: auto;
    }

    .item-tag {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 0.75rem;
      background: var(--background);
      border-radius: 4px;
      font-family: var(--font-mono);
      font-size: 0.875rem;
    }

    .item-tag .remove-btn {
      background: none;
      border: none;
      color: var(--error);
      cursor: pointer;
      font-size: 1rem;
      padding: 0;
      line-height: 1;
    }

    .generated-code {
      background: var(--code-bg);
      border-radius: var(--border-radius);
      padding: 1rem;
      font-family: var(--font-mono);
      font-size: 0.875rem;
      white-space: pre;
      overflow-x: auto;
      border: 1px solid var(--border);
      line-height: 1.6;
    }

    /* Memory Visualization */
    .memory-container {
      display: flex;
      gap: 2rem;
      padding: 1rem;
    }

    .memory-section {
      flex: 1;
    }

    .memory-section h4 {
      color: #fff;
      margin-bottom: 1rem;
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      opacity: 0.7;
    }

    .memory-block {
      background: rgba(255,255,255,0.1);
      border-radius: var(--border-radius);
      padding: 1rem;
      margin-bottom: 1rem;
      border-left: 4px solid var(--instance-color);
      transition: all 0.3s ease;
    }

    .memory-block.class-block {
      border-left-color: var(--class-color);
    }

    .memory-block.active {
      transform: scale(1.02);
      box-shadow: 0 0 20px rgba(46, 170, 220, 0.3);
    }

    .memory-block-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.75rem;
      color: #fff;
      font-family: var(--font-mono);
      font-size: 0.875rem;
    }

    .memory-block-header .type {
      opacity: 0.6;
    }

    .memory-attr {
      display: flex;
      justify-content: space-between;
      padding: 0.375rem 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      color: #fff;
      font-family: var(--font-mono);
      font-size: 0.8125rem;
    }

    .memory-attr:last-child {
      border-bottom: none;
    }

    .memory-attr .name {
      color: var(--attr-color);
    }

    .memory-attr .value {
      color: var(--method-color);
    }

    .memory-attr.changed {
      animation: attr-flash 0.5s ease;
    }

    @keyframes attr-flash {
      0%, 100% { background: transparent; }
      50% { background: rgba(46, 204, 113, 0.3); }
    }

    /* Instance Comparison */
    .instance-comparison {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .instance-card {
      background: rgba(255,255,255,0.1);
      border-radius: var(--border-radius);
      padding: 1rem;
      min-width: 200px;
      flex: 1;
      max-width: 250px;
    }

    .instance-card h5 {
      color: #fff;
      font-family: var(--font-mono);
      margin-bottom: 0.75rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid var(--instance-color);
    }

    .class-attr-section {
      margin-bottom: 0.75rem;
      padding: 0.5rem;
      background: rgba(231, 76, 60, 0.2);
      border-radius: 4px;
    }

    .class-attr-section .label {
      font-size: 0.75rem;
      color: var(--class-color);
      margin-bottom: 0.25rem;
    }

    .instance-attr-section {
      padding: 0.5rem;
      background: rgba(52, 152, 219, 0.2);
      border-radius: 4px;
    }

    .instance-attr-section .label {
      font-size: 0.75rem;
      color: var(--instance-color);
      margin-bottom: 0.25rem;
    }

    .attr-row {
      display: flex;
      justify-content: space-between;
      font-family: var(--font-mono);
      font-size: 0.8125rem;
      color: #fff;
      padding: 0.25rem 0;
    }

    /* Self Parameter Visualizer */
    .self-viz {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.5rem;
      padding: 1rem;
    }

    .method-call-box {
      background: rgba(155, 81, 224, 0.2);
      border: 2px solid var(--purple);
      border-radius: var(--border-radius);
      padding: 1rem 1.5rem;
      color: #fff;
      font-family: var(--font-mono);
      font-size: 1rem;
      text-align: center;
    }

    .arrow-down {
      width: 0;
      height: 0;
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-top: 20px solid var(--accent);
      animation: bounce 1s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(5px); }
    }

    .binding-box {
      display: flex;
      gap: 2rem;
      align-items: center;
    }

    .binding-item {
      background: rgba(46, 170, 220, 0.2);
      border: 2px solid var(--accent);
      border-radius: var(--border-radius);
      padding: 0.75rem 1rem;
      color: #fff;
      font-family: var(--font-mono);
      font-size: 0.875rem;
      text-align: center;
    }

    .binding-item .label {
      font-size: 0.75rem;
      opacity: 0.7;
      margin-bottom: 0.25rem;
    }

    .equals-sign {
      color: #fff;
      font-size: 1.5rem;
      font-weight: bold;
    }

    /* Step Controls */
    .step-controls {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem;
      background: var(--code-bg);
      border-radius: var(--border-radius);
      border: 1px solid var(--border);
      margin-top: 1rem;
      flex-wrap: wrap;
    }

    .step-controls button {
      padding: 0.5rem 0.75rem;
      background: var(--background);
      border: 1px solid var(--border);
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 1rem;
      color: var(--text-primary);
    }

    .step-controls button:hover:not(:disabled) {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    .step-controls button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .step-controls button.playing {
      background: var(--success);
      color: white;
      border-color: var(--success);
    }

    .step-indicator {
      font-family: var(--font-mono);
      font-size: 0.875rem;
      color: var(--text-secondary);
      padding: 0 1rem;
    }

    .speed-control {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-left: auto;
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    .speed-control select {
      padding: 0.25rem 0.5rem;
      border: 1px solid var(--border);
      border-radius: 4px;
      background: var(--background);
      color: var(--text-primary);
      font-family: var(--font-mono);
    }

    /* Progress Bar */
    .progress-container {
      width: 100%;
      margin-top: 0.5rem;
      position: relative;
      cursor: pointer;
      padding: 0.5rem 0;
    }

    .progress-bar {
      width: 100%;
      height: 6px;
      background: var(--border);
      border-radius: 3px;
      overflow: hidden;
      transition: height 0.2s;
    }

    .progress-container:hover .progress-bar {
      height: 8px;
    }

    .progress-fill {
      height: 100%;
      background: var(--accent);
      border-radius: 3px;
      transition: width 0.3s ease;
    }

    /* Step Description */
    .step-description {
      padding: 1rem;
      background: var(--highlight);
      border-radius: var(--border-radius);
      margin-bottom: 1rem;
      min-height: 3rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .step-description::before {
      content: '>';
      font-size: 1.25rem;
      color: var(--accent);
    }

    /* Code Panel */
    .viz-code-split {
      display: flex;
      gap: 1.5rem;
      margin: 1.5rem 0;
    }

    .viz-section {
      flex: 1;
      min-width: 0;
    }

    .code-section {
      flex: 0 0 400px;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .code-panel {
      background: var(--code-bg);
      border-radius: var(--border-radius);
      border: 1px solid var(--border);
      overflow: hidden;
    }

    .code-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem 1rem;
      background: var(--background-secondary);
      border-bottom: 1px solid var(--border);
    }

    .code-header .language-badge {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      padding: 0.25rem 0.5rem;
      background: var(--accent);
      color: white;
      border-radius: 4px;
    }

    .code-content {
      padding: 1rem;
      overflow-x: auto;
      max-height: 500px;
      overflow-y: auto;
    }

    .code-line {
      display: flex;
      padding: 0.125rem 0;
      font-family: var(--font-mono);
      font-size: 0.875rem;
      line-height: 1.6;
      transition: background 0.2s ease;
      position: relative;
    }

    .code-line.highlighted {
      background: rgba(241, 196, 15, 0.2);
      border-left: 3px solid #F1C40F;
      margin-left: -3px;
    }

    .code-line.executed {
      background: rgba(46, 204, 113, 0.1);
    }

    .line-number {
      width: 2.5rem;
      text-align: right;
      padding-right: 1rem;
      color: var(--text-secondary);
      user-select: none;
    }

    .line-content {
      flex: 1;
    }

    /* Syntax Highlighting */
    .keyword { color: #c678dd; }
    .string { color: #98c379; }
    .number { color: #d19a66; }
    .function { color: #61afef; }
    .comment { color: #5c6370; font-style: italic; }
    .variable { color: #e06c75; }
    .operator { color: #56b6c2; }
    .self { color: #e5c07b; }
    .class-name { color: #e06c75; }
    .decorator { color: #c678dd; }

    /* Variable Panel */
    .variable-panel {
      background: var(--code-bg);
      border-radius: var(--border-radius);
      border: 1px solid var(--border);
      padding: 1rem;
    }

    .variable-panel h4 {
      margin: 0 0 0.75rem 0;
      font-size: 0.875rem;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .variable-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .variable-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 0.75rem;
      background: var(--background);
      border-radius: 4px;
      font-family: var(--font-mono);
      font-size: 0.875rem;
      transition: all 0.3s ease;
    }

    .variable-name {
      color: var(--accent);
    }

    .variable-value {
      color: var(--text-primary);
    }

    .variable-value.changed {
      color: #F1C40F;
      font-weight: 600;
      animation: value-change 0.4s ease-out;
    }

    @keyframes value-change {
      0% { background: rgba(241, 196, 15, 0.5); transform: scale(1.1); }
      100% { background: transparent; transform: scale(1); }
    }

    /* Callout Boxes */
    .key-insight {
      background: var(--highlight);
      border-left: 4px solid #F1C40F;
      padding: 1rem 1.5rem;
      margin: 1.5rem 0;
      border-radius: 0 var(--border-radius) var(--border-radius) 0;
    }

    .key-insight strong {
      color: #D68910;
    }

    .try-this {
      background: rgba(46, 170, 220, 0.1);
      border-left: 4px solid var(--accent);
      padding: 1rem 1.5rem;
      margin: 1.5rem 0;
      border-radius: 0 var(--border-radius) var(--border-radius) 0;
    }

    .try-this strong {
      color: var(--accent);
    }

    .common-mistake {
      background: rgba(235, 87, 87, 0.1);
      border-left: 4px solid var(--error);
      padding: 1rem 1.5rem;
      margin: 1.5rem 0;
      border-radius: 0 var(--border-radius) var(--border-radius) 0;
    }

    .common-mistake strong {
      color: var(--error);
    }

    /* Quiz */
    .quiz-container {
      margin: 2rem 0;
    }

    .quiz-question {
      background: var(--background-secondary);
      border-radius: var(--border-radius);
      padding: var(--card-padding);
      margin-bottom: 1.5rem;
    }

    .quiz-question h4 {
      margin: 0 0 1rem 0;
    }

    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .quiz-option {
      border: 1px solid var(--border);
      padding: 1rem;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--background);
    }

    .quiz-option:hover {
      background: var(--code-bg);
    }

    .quiz-option.selected {
      border-color: var(--accent);
      background: rgba(46, 170, 220, 0.1);
    }

    .quiz-option.correct {
      border-color: var(--success);
      background: rgba(15, 123, 108, 0.1);
    }

    .quiz-option.incorrect {
      border-color: var(--error);
      background: rgba(235, 87, 87, 0.1);
    }

    .hint-btn {
      font-size: 0.875rem;
      color: var(--accent);
      background: none;
      border: none;
      cursor: pointer;
      padding: 0;
      margin-top: 0.75rem;
    }

    .hint-text {
      margin-top: 0.5rem;
      padding: 0.75rem;
      background: rgba(46, 170, 220, 0.1);
      border-radius: var(--border-radius);
      font-size: 0.875rem;
      display: none;
    }

    .hint-text.show {
      display: block;
    }

    .quiz-explanation {
      margin-top: 1rem;
      padding: 1rem;
      background: var(--highlight);
      border-radius: var(--border-radius);
      display: none;
    }

    .quiz-explanation.show {
      display: block;
    }

    /* Tabs */
    .tab-container {
      margin: 1rem 0;
    }

    .tab-buttons {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
      border-bottom: 1px solid var(--border);
      padding-bottom: 0.5rem;
    }

    .tab-button {
      padding: 0.5rem 1rem;
      background: none;
      border: none;
      border-radius: var(--border-radius) var(--border-radius) 0 0;
      cursor: pointer;
      color: var(--text-secondary);
      font-size: 0.875rem;
      transition: all 0.2s;
    }

    .tab-button.active {
      color: var(--accent);
      background: var(--background-secondary);
      font-weight: 500;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* Footer Navigation */
    .footer-nav {
      display: flex;
      justify-content: space-between;
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 1px solid var(--border);
    }

    .footer-nav a {
      color: var(--accent);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .footer-nav a:hover {
      text-decoration: underline;
    }

    /* Legend */
    .legend {
      display: flex;
      gap: 1.5rem;
      padding: 1rem;
      background: var(--background-secondary);
      border-radius: var(--border-radius);
      margin-top: 1rem;
      flex-wrap: wrap;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.875rem;
    }

    .legend-color {
      width: 16px;
      height: 16px;
      border-radius: 3px;
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .viz-code-split {
        flex-direction: column;
      }

      .code-section {
        flex: 1;
      }

      .class-builder {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 768px) {
      h1 { font-size: 1.75rem; }
      h2 { font-size: 1.5rem; }

      .step-controls { flex-wrap: wrap; }
      .step-controls button { flex: 1; min-width: 40px; }
      .speed-control { width: 100%; justify-content: center; margin-top: 0.5rem; margin-left: 0; }

      .instance-comparison {
        flex-direction: column;
        align-items: center;
      }

      .instance-card {
        max-width: 100%;
      }

      .binding-box {
        flex-direction: column;
        gap: 1rem;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
      }
    }
  </style>
</head>
<body>
  <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
    <span id="theme-icon">Moon</span>
  </button>

  <div class="container">
    <header>
      <span class="session-badge">Session 11</span>
      <h1>Writing Algorithms in Python - Part II (OOP)</h1>
      <p class="subtitle">Master object-oriented programming concepts: classes, objects, and encapsulation</p>
      <div class="meta">
        <span>Time: ~35 minutes</span>
        <span>Prerequisites: Python Basics (Session 1)</span>
      </div>
    </header>

    <section class="objectives">
      <h3>Learning Objectives</h3>
      <ul>
        <li><strong>Define</strong> classes with attributes and methods in Python</li>
        <li><strong>Explain</strong> the role of <code>__init__</code> constructor and <code>self</code> parameter</li>
        <li><strong>Distinguish</strong> between instance attributes and class attributes</li>
        <li><strong>Create</strong> multiple object instances and understand memory allocation</li>
        <li><strong>Apply</strong> encapsulation principles to organize code</li>
      </ul>
    </section>

    <!-- Section 1: What is OOP? -->
    <h2>1. What is Object-Oriented Programming?</h2>
    <p>Object-Oriented Programming (OOP) is a programming paradigm that organizes code around <strong>objects</strong> rather than functions. An object bundles together data (attributes) and behaviors (methods) that belong together logically.</p>

    <div class="key-insight">
      <strong>Key Insight:</strong> Think of a class as a <em>blueprint</em> and objects as <em>houses built from that blueprint</em>. The blueprint defines what features a house has (rooms, doors, windows), but each house is a separate instance with its own specific values (paint color, address).
    </div>

    <div class="viz-container">
      <h3>Classes vs Objects Analogy</h3>
      <div class="viz-canvas" style="min-height: 200px;">
        <div class="memory-container">
          <div class="memory-section">
            <h4>Class (Blueprint)</h4>
            <div class="memory-block class-block">
              <div class="memory-block-header">
                <span>BankAccount</span>
                <span class="type">class</span>
              </div>
              <div class="memory-attr">
                <span class="name">owner</span>
                <span class="value">(to be defined)</span>
              </div>
              <div class="memory-attr">
                <span class="name">balance</span>
                <span class="value">(to be defined)</span>
              </div>
              <div class="memory-attr">
                <span class="name">deposit()</span>
                <span class="value">method</span>
              </div>
              <div class="memory-attr">
                <span class="name">withdraw()</span>
                <span class="value">method</span>
              </div>
            </div>
          </div>
          <div class="memory-section">
            <h4>Objects (Instances)</h4>
            <div class="memory-block">
              <div class="memory-block-header">
                <span>account1</span>
                <span class="type">BankAccount</span>
              </div>
              <div class="memory-attr">
                <span class="name">owner</span>
                <span class="value">"Alice"</span>
              </div>
              <div class="memory-attr">
                <span class="name">balance</span>
                <span class="value">1000</span>
              </div>
            </div>
            <div class="memory-block">
              <div class="memory-block-header">
                <span>account2</span>
                <span class="type">BankAccount</span>
              </div>
              <div class="memory-attr">
                <span class="name">owner</span>
                <span class="value">"Bob"</span>
              </div>
              <div class="memory-attr">
                <span class="name">balance</span>
                <span class="value">500</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="legend">
        <div class="legend-item">
          <div class="legend-color" style="background: var(--class-color);"></div>
          <span>Class (template)</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: var(--instance-color);"></div>
          <span>Instance (object)</span>
        </div>
      </div>
    </div>

    <!-- Section 2: Interactive Class Builder -->
    <h2>2. Building Your First Class</h2>
    <p>Let's build a class step by step. Add attributes (data) and methods (behaviors) to see how the class definition is constructed in Python.</p>

    <div class="viz-container">
      <h3>Interactive Class Builder</h3>

      <div class="class-builder">
        <div class="builder-panel">
          <h4>Class Name</h4>
          <div class="builder-input-group">
            <input type="text" id="class-name-input" placeholder="e.g., Student" value="Student">
          </div>

          <h4>Attributes (Data)</h4>
          <div class="builder-input-group">
            <input type="text" id="attr-name-input" placeholder="Attribute name">
            <select id="attr-type-input">
              <option value="str">str</option>
              <option value="int">int</option>
              <option value="float">float</option>
              <option value="bool">bool</option>
              <option value="list">list</option>
            </select>
            <button onclick="addAttribute()">Add</button>
          </div>
          <div class="item-list" id="attributes-list"></div>

          <h4 style="margin-top: 1rem;">Methods (Behaviors)</h4>
          <div class="builder-input-group">
            <input type="text" id="method-name-input" placeholder="Method name">
            <button onclick="addMethod()">Add</button>
          </div>
          <div class="item-list" id="methods-list"></div>
        </div>

        <div class="builder-panel">
          <h4>Generated Python Code</h4>
          <div class="generated-code" id="generated-code">
class Student:
    def __init__(self):
        pass
          </div>
          <button onclick="resetBuilder()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: var(--error); color: white; border: none; border-radius: var(--border-radius); cursor: pointer;">Reset</button>
          <button onclick="loadExample()" style="margin-top: 1rem; margin-left: 0.5rem; padding: 0.5rem 1rem; background: var(--success); color: white; border: none; border-radius: var(--border-radius); cursor: pointer;">Load Example</button>
        </div>
      </div>

      <div class="try-this">
        <strong>Try This:</strong> Build a <code>Student</code> class with attributes <code>name</code> (str), <code>age</code> (int), <code>gpa</code> (float), and methods <code>study()</code> and <code>take_exam()</code>.
      </div>
    </div>

    <!-- Section 3: Object Instantiation Animator -->
    <h2>3. The <code>__init__</code> Constructor</h2>
    <p>When you create an object, Python automatically calls the <code>__init__</code> method (the constructor). This method initializes the object's attributes. Watch step-by-step how memory is allocated and values are assigned.</p>

    <div class="viz-code-split">
      <div class="viz-section">
        <div class="viz-container">
          <h3>Object Instantiation Animator</h3>
          <div class="step-description" id="init-description">
            Press Play to watch object creation step by step
          </div>

          <div class="viz-canvas" id="init-viz">
            <div class="memory-container" id="init-memory">
              <!-- Generated by JavaScript -->
            </div>
          </div>

          <div class="step-controls">
            <button id="init-reset" title="Reset">Reset</button>
            <button id="init-back" title="Step Back">Back</button>
            <button id="init-play" title="Play/Pause">Play</button>
            <button id="init-forward" title="Step Forward">Next</button>
            <span class="step-indicator" id="init-step-indicator">Step 0 of 0</span>
            <div class="speed-control">
              <label>Speed:</label>
              <select id="init-speed">
                <option value="0.5">0.5x</option>
                <option value="1" selected>1x</option>
                <option value="2">2x</option>
              </select>
            </div>
          </div>

          <div class="progress-container">
            <div class="progress-bar">
              <div class="progress-fill" id="init-progress" style="width: 0%"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="code-section">
        <div class="code-panel">
          <div class="code-header">
            <span class="language-badge">Python</span>
          </div>
          <div class="code-content" id="init-code">
            <div class="code-line" data-line="1">
              <span class="line-number">1</span>
              <span class="line-content"><span class="keyword">class</span> <span class="class-name">BankAccount</span>:</span>
            </div>
            <div class="code-line" data-line="2">
              <span class="line-number">2</span>
              <span class="line-content">    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="self">self</span>, owner, balance):</span>
            </div>
            <div class="code-line" data-line="3">
              <span class="line-number">3</span>
              <span class="line-content">        <span class="self">self</span>.owner <span class="operator">=</span> owner</span>
            </div>
            <div class="code-line" data-line="4">
              <span class="line-number">4</span>
              <span class="line-content">        <span class="self">self</span>.balance <span class="operator">=</span> balance</span>
            </div>
            <div class="code-line" data-line="5">
              <span class="line-number">5</span>
              <span class="line-content"></span>
            </div>
            <div class="code-line" data-line="6">
              <span class="line-number">6</span>
              <span class="line-content"><span class="comment"># Creating an object</span></span>
            </div>
            <div class="code-line" data-line="7">
              <span class="line-number">7</span>
              <span class="line-content"><span class="variable">acc</span> <span class="operator">=</span> <span class="class-name">BankAccount</span>(<span class="string">"Alice"</span>, <span class="number">1000</span>)</span>
            </div>
          </div>
        </div>

        <div class="variable-panel">
          <h4>Memory State</h4>
          <div class="variable-list" id="init-variables">
            <div class="variable-item">
              <span class="variable-name">acc</span>
              <span class="variable-value" id="var-acc">undefined</span>
            </div>
            <div class="variable-item">
              <span class="variable-name">acc.owner</span>
              <span class="variable-value" id="var-owner">-</span>
            </div>
            <div class="variable-item">
              <span class="variable-name">acc.balance</span>
              <span class="variable-value" id="var-balance">-</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="common-mistake">
      <strong>Common Mistake:</strong> Forgetting <code>self</code> as the first parameter in methods. Every instance method must have <code>self</code> as its first parameter - Python passes the object automatically when you call the method.
    </div>

    <!-- Section 4: Instance vs Class Attributes -->
    <h2>4. Instance vs Class Attributes</h2>
    <p>There are two types of attributes in Python classes: <strong>instance attributes</strong> (unique to each object) and <strong>class attributes</strong> (shared by all objects).</p>

    <div class="viz-container">
      <h3>Instance vs Class Attributes Comparison</h3>
      <div class="step-description" id="attrs-description">
        Watch how class attributes are shared while instance attributes are unique
      </div>

      <div class="viz-canvas" style="min-height: 350px;">
        <div class="instance-comparison" id="attrs-viz">
          <!-- Class attribute section -->
          <div class="instance-card" style="border-color: var(--class-color); max-width: 300px;">
            <h5 style="border-color: var(--class-color);">BankAccount Class</h5>
            <div class="class-attr-section">
              <div class="label">Class Attribute (shared)</div>
              <div class="attr-row">
                <span>bank_name</span>
                <span id="class-bank-name">"Python Bank"</span>
              </div>
              <div class="attr-row">
                <span>interest_rate</span>
                <span id="class-interest-rate">0.05</span>
              </div>
            </div>
          </div>

          <!-- Instance 1 -->
          <div class="instance-card">
            <h5>account1</h5>
            <div class="class-attr-section">
              <div class="label">Class Attrs (inherited)</div>
              <div class="attr-row">
                <span>bank_name</span>
                <span id="acc1-bank-name">"Python Bank"</span>
              </div>
            </div>
            <div class="instance-attr-section">
              <div class="label">Instance Attrs (unique)</div>
              <div class="attr-row">
                <span>owner</span>
                <span>"Alice"</span>
              </div>
              <div class="attr-row">
                <span>balance</span>
                <span id="acc1-balance">1000</span>
              </div>
            </div>
          </div>

          <!-- Instance 2 -->
          <div class="instance-card">
            <h5>account2</h5>
            <div class="class-attr-section">
              <div class="label">Class Attrs (inherited)</div>
              <div class="attr-row">
                <span>bank_name</span>
                <span id="acc2-bank-name">"Python Bank"</span>
              </div>
            </div>
            <div class="instance-attr-section">
              <div class="label">Instance Attrs (unique)</div>
              <div class="attr-row">
                <span>owner</span>
                <span>"Bob"</span>
              </div>
              <div class="attr-row">
                <span>balance</span>
                <span id="acc2-balance">500</span>
              </div>
            </div>
          </div>

          <!-- Instance 3 -->
          <div class="instance-card">
            <h5>account3</h5>
            <div class="class-attr-section">
              <div class="label">Class Attrs (inherited)</div>
              <div class="attr-row">
                <span>bank_name</span>
                <span id="acc3-bank-name">"Python Bank"</span>
              </div>
            </div>
            <div class="instance-attr-section">
              <div class="label">Instance Attrs (unique)</div>
              <div class="attr-row">
                <span>owner</span>
                <span>"Charlie"</span>
              </div>
              <div class="attr-row">
                <span>balance</span>
                <span id="acc3-balance">750</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="step-controls">
        <button onclick="changeClassAttr()">Change Class Attribute</button>
        <button onclick="changeInstanceAttr()">Change Instance Attribute</button>
        <button onclick="resetAttrsDemo()">Reset Demo</button>
      </div>

      <div class="legend">
        <div class="legend-item">
          <div class="legend-color" style="background: var(--class-color);"></div>
          <span>Class Attributes (shared by all instances)</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: var(--instance-color);"></div>
          <span>Instance Attributes (unique to each object)</span>
        </div>
      </div>
    </div>

    <div class="key-insight">
      <strong>Key Insight:</strong> When you change a class attribute, ALL instances see the new value. When you change an instance attribute, only THAT specific object is affected.
    </div>

    <!-- Section 5: Self Parameter Binding -->
    <h2>5. Understanding the <code>self</code> Parameter</h2>
    <p>The <code>self</code> parameter is how Python connects a method call to the specific object it belongs to. When you call <code>account.deposit(100)</code>, Python translates this to <code>BankAccount.deposit(account, 100)</code>.</p>

    <div class="viz-code-split">
      <div class="viz-section">
        <div class="viz-container">
          <h3>Self Parameter Binding Visualizer</h3>
          <div class="step-description" id="self-description">
            Watch how Python binds self to the object when calling methods
          </div>

          <div class="viz-canvas" id="self-viz">
            <div class="self-viz">
              <div class="method-call-box" id="self-call">
                account1.deposit(100)
              </div>
              <div class="arrow-down" id="self-arrow"></div>
              <div class="binding-box" id="self-binding">
                <div class="binding-item">
                  <div class="label">self</div>
                  <div id="self-value">account1</div>
                </div>
                <div class="equals-sign">=</div>
                <div class="binding-item">
                  <div class="label">amount</div>
                  <div id="amount-value">100</div>
                </div>
              </div>
              <div class="memory-block" id="self-object" style="margin-top: 1rem; min-width: 200px;">
                <div class="memory-block-header">
                  <span>account1</span>
                  <span class="type">BankAccount</span>
                </div>
                <div class="memory-attr">
                  <span class="name">owner</span>
                  <span class="value">"Alice"</span>
                </div>
                <div class="memory-attr" id="self-balance-attr">
                  <span class="name">balance</span>
                  <span class="value" id="self-balance-value">1000</span>
                </div>
              </div>
            </div>
          </div>

          <div class="step-controls">
            <button id="self-reset" title="Reset">Reset</button>
            <button id="self-back" title="Step Back">Back</button>
            <button id="self-play" title="Play/Pause">Play</button>
            <button id="self-forward" title="Step Forward">Next</button>
            <span class="step-indicator" id="self-step-indicator">Step 0 of 0</span>
          </div>

          <div class="progress-container">
            <div class="progress-bar">
              <div class="progress-fill" id="self-progress" style="width: 0%"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="code-section">
        <div class="code-panel">
          <div class="code-header">
            <span class="language-badge">Python</span>
          </div>
          <div class="code-content" id="self-code">
            <div class="code-line" data-line="1">
              <span class="line-number">1</span>
              <span class="line-content"><span class="keyword">class</span> <span class="class-name">BankAccount</span>:</span>
            </div>
            <div class="code-line" data-line="2">
              <span class="line-number">2</span>
              <span class="line-content">    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="self">self</span>, owner, balance):</span>
            </div>
            <div class="code-line" data-line="3">
              <span class="line-number">3</span>
              <span class="line-content">        <span class="self">self</span>.owner <span class="operator">=</span> owner</span>
            </div>
            <div class="code-line" data-line="4">
              <span class="line-number">4</span>
              <span class="line-content">        <span class="self">self</span>.balance <span class="operator">=</span> balance</span>
            </div>
            <div class="code-line" data-line="5">
              <span class="line-number">5</span>
              <span class="line-content"></span>
            </div>
            <div class="code-line" data-line="6">
              <span class="line-number">6</span>
              <span class="line-content">    <span class="keyword">def</span> <span class="function">deposit</span>(<span class="self">self</span>, amount):</span>
            </div>
            <div class="code-line" data-line="7">
              <span class="line-number">7</span>
              <span class="line-content">        <span class="self">self</span>.balance <span class="operator">+=</span> amount</span>
            </div>
            <div class="code-line" data-line="8">
              <span class="line-number">8</span>
              <span class="line-content">        <span class="keyword">return</span> <span class="self">self</span>.balance</span>
            </div>
            <div class="code-line" data-line="9">
              <span class="line-number">9</span>
              <span class="line-content"></span>
            </div>
            <div class="code-line" data-line="10">
              <span class="line-number">10</span>
              <span class="line-content"><span class="variable">account1</span> <span class="operator">=</span> <span class="class-name">BankAccount</span>(<span class="string">"Alice"</span>, <span class="number">1000</span>)</span>
            </div>
            <div class="code-line" data-line="11">
              <span class="line-number">11</span>
              <span class="line-content"><span class="variable">account1</span>.<span class="function">deposit</span>(<span class="number">100</span>)</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="common-mistake">
      <strong>Common Mistake:</strong> Calling <code>self.deposit(100)</code> outside a class method. <code>self</code> only exists inside methods. From outside, use the object name: <code>account1.deposit(100)</code>.
    </div>

    <!-- Section 6: Encapsulation -->
    <h2>6. Encapsulation Principles</h2>
    <p>Encapsulation is the practice of bundling data and methods together and restricting direct access to some components. In Python, we use naming conventions to indicate access levels.</p>

    <div class="viz-container">
      <h3>Encapsulation in Python</h3>

      <div class="tab-container">
        <div class="tab-buttons">
          <button class="tab-button active" onclick="switchTab('public')">Public</button>
          <button class="tab-button" onclick="switchTab('protected')">Protected (_)</button>
          <button class="tab-button" onclick="switchTab('private')">Private (__)</button>
        </div>

        <div class="tab-content active" id="tab-public">
          <div class="code-panel">
            <div class="code-content">
              <div class="code-line">
                <span class="line-number">1</span>
                <span class="line-content"><span class="keyword">class</span> <span class="class-name">BankAccount</span>:</span>
              </div>
              <div class="code-line">
                <span class="line-number">2</span>
                <span class="line-content">    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="self">self</span>, owner):</span>
              </div>
              <div class="code-line">
                <span class="line-number">3</span>
                <span class="line-content">        <span class="self">self</span>.owner <span class="operator">=</span> owner  <span class="comment"># Public</span></span>
              </div>
              <div class="code-line">
                <span class="line-number">4</span>
                <span class="line-content"></span>
              </div>
              <div class="code-line">
                <span class="line-number">5</span>
                <span class="line-content"><span class="variable">acc</span> <span class="operator">=</span> <span class="class-name">BankAccount</span>(<span class="string">"Alice"</span>)</span>
              </div>
              <div class="code-line">
                <span class="line-number">6</span>
                <span class="line-content"><span class="function">print</span>(<span class="variable">acc</span>.owner)  <span class="comment"># OK: "Alice"</span></span>
              </div>
              <div class="code-line">
                <span class="line-number">7</span>
                <span class="line-content"><span class="variable">acc</span>.owner <span class="operator">=</span> <span class="string">"Bob"</span>  <span class="comment"># OK: Can modify</span></span>
              </div>
            </div>
          </div>
          <p style="margin-top: 1rem;"><strong>Public attributes:</strong> Accessible from anywhere. No underscore prefix. Use for data that should be freely accessible.</p>
        </div>

        <div class="tab-content" id="tab-protected">
          <div class="code-panel">
            <div class="code-content">
              <div class="code-line">
                <span class="line-number">1</span>
                <span class="line-content"><span class="keyword">class</span> <span class="class-name">BankAccount</span>:</span>
              </div>
              <div class="code-line">
                <span class="line-number">2</span>
                <span class="line-content">    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="self">self</span>, balance):</span>
              </div>
              <div class="code-line">
                <span class="line-number">3</span>
                <span class="line-content">        <span class="self">self</span>._balance <span class="operator">=</span> balance  <span class="comment"># Protected</span></span>
              </div>
              <div class="code-line">
                <span class="line-number">4</span>
                <span class="line-content"></span>
              </div>
              <div class="code-line">
                <span class="line-number">5</span>
                <span class="line-content"><span class="variable">acc</span> <span class="operator">=</span> <span class="class-name">BankAccount</span>(<span class="number">1000</span>)</span>
              </div>
              <div class="code-line">
                <span class="line-number">6</span>
                <span class="line-content"><span class="function">print</span>(<span class="variable">acc</span>._balance)  <span class="comment"># Works, but discouraged</span></span>
              </div>
              <div class="code-line">
                <span class="line-number">7</span>
                <span class="line-content"><span class="comment"># Convention: "Don't touch unless you know what you're doing"</span></span>
              </div>
            </div>
          </div>
          <p style="margin-top: 1rem;"><strong>Protected attributes:</strong> Single underscore prefix (_). A convention signaling "internal use" - accessible but treat with care.</p>
        </div>

        <div class="tab-content" id="tab-private">
          <div class="code-panel">
            <div class="code-content">
              <div class="code-line">
                <span class="line-number">1</span>
                <span class="line-content"><span class="keyword">class</span> <span class="class-name">BankAccount</span>:</span>
              </div>
              <div class="code-line">
                <span class="line-number">2</span>
                <span class="line-number">2</span>
                <span class="line-content">    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="self">self</span>, pin):</span>
              </div>
              <div class="code-line">
                <span class="line-number">3</span>
                <span class="line-content">        <span class="self">self</span>.__pin <span class="operator">=</span> pin  <span class="comment"># Private</span></span>
              </div>
              <div class="code-line">
                <span class="line-number">4</span>
                <span class="line-content"></span>
              </div>
              <div class="code-line">
                <span class="line-number">5</span>
                <span class="line-content"><span class="variable">acc</span> <span class="operator">=</span> <span class="class-name">BankAccount</span>(<span class="number">1234</span>)</span>
              </div>
              <div class="code-line">
                <span class="line-number">6</span>
                <span class="line-content"><span class="function">print</span>(<span class="variable">acc</span>.__pin)  <span class="comment"># AttributeError!</span></span>
              </div>
              <div class="code-line">
                <span class="line-number">7</span>
                <span class="line-content"><span class="comment"># Name mangling: becomes _BankAccount__pin</span></span>
              </div>
            </div>
          </div>
          <p style="margin-top: 1rem;"><strong>Private attributes:</strong> Double underscore prefix (__). Python performs "name mangling" making it harder to access from outside. Use for sensitive data.</p>
        </div>
      </div>
    </div>

    <div class="key-insight">
      <strong>Key Insight:</strong> Python's approach to encapsulation is "we're all consenting adults here." The underscores are conventions, not strict enforcement. Python trusts developers to respect these boundaries.
    </div>

    <!-- Section 7: Complete Example -->
    <h2>7. Complete Working Example</h2>
    <p>Let's put everything together with a complete <code>BankAccount</code> class that demonstrates all the concepts we've learned.</p>

    <div class="viz-container">
      <div class="code-panel">
        <div class="code-header">
          <span class="language-badge">Python</span>
          <span style="font-size: 0.875rem; color: var(--text-secondary);">Complete BankAccount Class</span>
        </div>
        <div class="code-content">
          <div class="code-line">
            <span class="line-number">1</span>
            <span class="line-content"><span class="keyword">class</span> <span class="class-name">BankAccount</span>:</span>
          </div>
          <div class="code-line">
            <span class="line-number">2</span>
            <span class="line-content">    <span class="comment"># Class attribute - shared by all instances</span></span>
          </div>
          <div class="code-line">
            <span class="line-number">3</span>
            <span class="line-content">    bank_name <span class="operator">=</span> <span class="string">"Python Bank"</span></span>
          </div>
          <div class="code-line">
            <span class="line-number">4</span>
            <span class="line-content">    interest_rate <span class="operator">=</span> <span class="number">0.05</span></span>
          </div>
          <div class="code-line">
            <span class="line-number">5</span>
            <span class="line-content"></span>
          </div>
          <div class="code-line">
            <span class="line-number">6</span>
            <span class="line-content">    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="self">self</span>, owner, balance<span class="operator">=</span><span class="number">0</span>):</span>
          </div>
          <div class="code-line">
            <span class="line-number">7</span>
            <span class="line-content">        <span class="comment"># Instance attributes - unique to each object</span></span>
          </div>
          <div class="code-line">
            <span class="line-number">8</span>
            <span class="line-content">        <span class="self">self</span>.owner <span class="operator">=</span> owner</span>
          </div>
          <div class="code-line">
            <span class="line-number">9</span>
            <span class="line-content">        <span class="self">self</span>._balance <span class="operator">=</span> balance  <span class="comment"># Protected</span></span>
          </div>
          <div class="code-line">
            <span class="line-number">10</span>
            <span class="line-content"></span>
          </div>
          <div class="code-line">
            <span class="line-number">11</span>
            <span class="line-content">    <span class="keyword">def</span> <span class="function">deposit</span>(<span class="self">self</span>, amount):</span>
          </div>
          <div class="code-line">
            <span class="line-number">12</span>
            <span class="line-content">        <span class="keyword">if</span> amount <span class="operator">></span> <span class="number">0</span>:</span>
          </div>
          <div class="code-line">
            <span class="line-number">13</span>
            <span class="line-content">            <span class="self">self</span>._balance <span class="operator">+=</span> amount</span>
          </div>
          <div class="code-line">
            <span class="line-number">14</span>
            <span class="line-content">            <span class="keyword">return</span> <span class="keyword">True</span></span>
          </div>
          <div class="code-line">
            <span class="line-number">15</span>
            <span class="line-content">        <span class="keyword">return</span> <span class="keyword">False</span></span>
          </div>
          <div class="code-line">
            <span class="line-number">16</span>
            <span class="line-content"></span>
          </div>
          <div class="code-line">
            <span class="line-number">17</span>
            <span class="line-content">    <span class="keyword">def</span> <span class="function">withdraw</span>(<span class="self">self</span>, amount):</span>
          </div>
          <div class="code-line">
            <span class="line-number">18</span>
            <span class="line-content">        <span class="keyword">if</span> <span class="number">0</span> <span class="operator"><</span> amount <span class="operator"><=</span> <span class="self">self</span>._balance:</span>
          </div>
          <div class="code-line">
            <span class="line-number">19</span>
            <span class="line-content">            <span class="self">self</span>._balance <span class="operator">-=</span> amount</span>
          </div>
          <div class="code-line">
            <span class="line-number">20</span>
            <span class="line-content">            <span class="keyword">return</span> <span class="keyword">True</span></span>
          </div>
          <div class="code-line">
            <span class="line-number">21</span>
            <span class="line-content">        <span class="keyword">return</span> <span class="keyword">False</span></span>
          </div>
          <div class="code-line">
            <span class="line-number">22</span>
            <span class="line-content"></span>
          </div>
          <div class="code-line">
            <span class="line-number">23</span>
            <span class="line-content">    <span class="keyword">def</span> <span class="function">get_balance</span>(<span class="self">self</span>):</span>
          </div>
          <div class="code-line">
            <span class="line-number">24</span>
            <span class="line-content">        <span class="keyword">return</span> <span class="self">self</span>._balance</span>
          </div>
          <div class="code-line">
            <span class="line-number">25</span>
            <span class="line-content"></span>
          </div>
          <div class="code-line">
            <span class="line-number">26</span>
            <span class="line-content">    <span class="keyword">def</span> <span class="function">add_interest</span>(<span class="self">self</span>):</span>
          </div>
          <div class="code-line">
            <span class="line-number">27</span>
            <span class="line-content">        interest <span class="operator">=</span> <span class="self">self</span>._balance <span class="operator">*</span> <span class="self">self</span>.interest_rate</span>
          </div>
          <div class="code-line">
            <span class="line-number">28</span>
            <span class="line-content">        <span class="self">self</span>._balance <span class="operator">+=</span> interest</span>
          </div>
          <div class="code-line">
            <span class="line-number">29</span>
            <span class="line-content">        <span class="keyword">return</span> interest</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Quiz Section -->
    <h2>8. Quick Check</h2>

    <div class="quiz-container">
      <!-- Question 1 -->
      <div class="quiz-question" id="quiz-1">
        <h4>Question 1: What is the purpose of the <code>__init__</code> method?</h4>
        <div class="quiz-options" data-correct="2" data-hints='["Think about what happens when you create a new object", "Consider what \"initialize\" means in programming"]'>
          <div class="quiz-option" data-index="0">To delete an object from memory</div>
          <div class="quiz-option" data-index="1">To define the class name</div>
          <div class="quiz-option" data-index="2">To initialize object attributes when creating an instance</div>
          <div class="quiz-option" data-index="3">To import external modules</div>
        </div>
        <button class="hint-btn" onclick="showHint(this, 0)">Show Hint 1</button>
        <div class="hint-text" id="hint-1-0"></div>
        <button class="hint-btn" onclick="showHint(this, 1)" style="display: none;" id="hint-btn-1-1">Show Hint 2</button>
        <div class="hint-text" id="hint-1-1"></div>
        <div class="quiz-explanation">
          <strong>Correct!</strong> The <code>__init__</code> method is the constructor that Python calls automatically when you create a new object. It's used to set up the initial state (attributes) of the object.
        </div>
      </div>

      <!-- Question 2 -->
      <div class="quiz-question" id="quiz-2">
        <h4>Question 2: What does <code>self</code> refer to in a class method?</h4>
        <div class="quiz-options" data-correct="1" data-hints='["Think about what object is \"calling\" the method", "When you write account1.deposit(), what is account1 inside the method?"]'>
          <div class="quiz-option" data-index="0">The class itself</div>
          <div class="quiz-option" data-index="1">The specific instance calling the method</div>
          <div class="quiz-option" data-index="2">A built-in Python keyword</div>
          <div class="quiz-option" data-index="3">The parent class</div>
        </div>
        <button class="hint-btn" onclick="showHint(this, 0)">Show Hint 1</button>
        <div class="hint-text" id="hint-2-0"></div>
        <button class="hint-btn" onclick="showHint(this, 1)" style="display: none;" id="hint-btn-2-1">Show Hint 2</button>
        <div class="hint-text" id="hint-2-1"></div>
        <div class="quiz-explanation">
          <strong>Correct!</strong> <code>self</code> refers to the specific object instance that called the method. When you call <code>account1.deposit(100)</code>, inside the method, <code>self</code> is <code>account1</code>.
        </div>
      </div>

      <!-- Question 3 -->
      <div class="quiz-question" id="quiz-3">
        <h4>Question 3: Given this code, what will <code>acc2.bank_name</code> return after the change?</h4>
        <pre style="background: var(--code-bg); padding: 1rem; border-radius: 4px; font-family: var(--font-mono); margin-bottom: 1rem;">class BankAccount:
    bank_name = "Old Bank"

acc1 = BankAccount()
acc2 = BankAccount()
BankAccount.bank_name = "New Bank"
print(acc2.bank_name)</pre>
        <div class="quiz-options" data-correct="1" data-hints='["Is bank_name a class attribute or instance attribute?", "Class attributes are shared - when you change the class attribute, what happens to instances?"]'>
          <div class="quiz-option" data-index="0">"Old Bank"</div>
          <div class="quiz-option" data-index="1">"New Bank"</div>
          <div class="quiz-option" data-index="2">None</div>
          <div class="quiz-option" data-index="3">Error</div>
        </div>
        <button class="hint-btn" onclick="showHint(this, 0)">Show Hint 1</button>
        <div class="hint-text" id="hint-3-0"></div>
        <button class="hint-btn" onclick="showHint(this, 1)" style="display: none;" id="hint-btn-3-1">Show Hint 2</button>
        <div class="hint-text" id="hint-3-1"></div>
        <div class="quiz-explanation">
          <strong>Correct!</strong> <code>bank_name</code> is a class attribute, shared by all instances. When you change it via <code>BankAccount.bank_name</code>, all instances see the new value.
        </div>
      </div>

      <!-- Question 4 -->
      <div class="quiz-question" id="quiz-4">
        <h4>Question 4: What naming convention indicates a "protected" attribute in Python?</h4>
        <div class="quiz-options" data-correct="0" data-hints='["Think about underscore prefixes", "How many underscores are used for protected vs private?"]'>
          <div class="quiz-option" data-index="0">Single underscore prefix: <code>_balance</code></div>
          <div class="quiz-option" data-index="1">Double underscore prefix: <code>__balance</code></div>
          <div class="quiz-option" data-index="2">No underscore: <code>balance</code></div>
          <div class="quiz-option" data-index="3">Underscore suffix: <code>balance_</code></div>
        </div>
        <button class="hint-btn" onclick="showHint(this, 0)">Show Hint 1</button>
        <div class="hint-text" id="hint-4-0"></div>
        <button class="hint-btn" onclick="showHint(this, 1)" style="display: none;" id="hint-btn-4-1">Show Hint 2</button>
        <div class="hint-text" id="hint-4-1"></div>
        <div class="quiz-explanation">
          <strong>Correct!</strong> Single underscore (<code>_balance</code>) indicates a protected attribute - a convention meaning "internal use, handle with care." Double underscore triggers name mangling for "private" attributes.
        </div>
      </div>

      <!-- Question 5 -->
      <div class="quiz-question" id="quiz-5">
        <h4>Question 5: What will this code output?</h4>
        <pre style="background: var(--code-bg); padding: 1rem; border-radius: 4px; font-family: var(--font-mono); margin-bottom: 1rem;">class Counter:
    count = 0
    def __init__(self):
        Counter.count += 1

c1 = Counter()
c2 = Counter()
c3 = Counter()
print(Counter.count)</pre>
        <div class="quiz-options" data-correct="2" data-hints='["Each time __init__ runs, what happens to Counter.count?", "How many Counter objects are created?"]'>
          <div class="quiz-option" data-index="0">0</div>
          <div class="quiz-option" data-index="1">1</div>
          <div class="quiz-option" data-index="2">3</div>
          <div class="quiz-option" data-index="3">Error</div>
        </div>
        <button class="hint-btn" onclick="showHint(this, 0)">Show Hint 1</button>
        <div class="hint-text" id="hint-5-0"></div>
        <button class="hint-btn" onclick="showHint(this, 1)" style="display: none;" id="hint-btn-5-1">Show Hint 2</button>
        <div class="hint-text" id="hint-5-1"></div>
        <div class="quiz-explanation">
          <strong>Correct!</strong> <code>count</code> is a class attribute that gets incremented each time a new object is created. After creating 3 objects (c1, c2, c3), the count is 3. This is a common pattern for tracking instance count.
        </div>
      </div>
    </div>

    <!-- Dive Deeper -->
    <h2>9. Dive Deeper</h2>
    <ul style="padding-left: 1.5rem;">
      <li><a href="https://docs.python.org/3/tutorial/classes.html" target="_blank">Python Official Tutorial: Classes</a></li>
      <li><a href="https://realpython.com/python3-object-oriented-programming/" target="_blank">Real Python: OOP in Python 3</a></li>
      <li><a href="https://www.pythontutorial.net/python-oop/" target="_blank">Python OOP Tutorial Series</a></li>
    </ul>

    <!-- Footer Navigation -->
    <nav class="footer-nav">
      <a href="session-01-python-basics.html">Session 1: Python Basics</a>
      <a href="session-12-inheritance.html">Session 12: Inheritance and Polymorphism</a>
    </nav>
  </div>

  <script>
    // ==========================================
    // Theme Toggle with localStorage persistence
    // ==========================================
    function toggleTheme() {
      const html = document.documentElement;
      const current = html.getAttribute('data-theme');
      const next = current === 'dark' ? 'light' : 'dark';
      html.setAttribute('data-theme', next);
      document.getElementById('theme-icon').textContent = next === 'dark' ? 'Sun' : 'Moon';
      localStorage.setItem('cs110-theme', next);
    }

    // Load saved theme
    const savedTheme = localStorage.getItem('cs110-theme') || 'light';
    document.documentElement.setAttribute('data-theme', savedTheme);
    document.getElementById('theme-icon').textContent = savedTheme === 'dark' ? 'Sun' : 'Moon';

    // ==========================================
    // Interactive Class Builder
    // ==========================================
    let classAttributes = [];
    let classMethods = [];

    function addAttribute() {
      const nameInput = document.getElementById('attr-name-input');
      const typeInput = document.getElementById('attr-type-input');
      const name = nameInput.value.trim();
      const type = typeInput.value;

      if (name && !classAttributes.find(a => a.name === name)) {
        classAttributes.push({ name, type });
        renderAttributesList();
        updateGeneratedCode();
        nameInput.value = '';
      }
    }

    function addMethod() {
      const nameInput = document.getElementById('method-name-input');
      const name = nameInput.value.trim();

      if (name && !classMethods.includes(name)) {
        classMethods.push(name);
        renderMethodsList();
        updateGeneratedCode();
        nameInput.value = '';
      }
    }

    function removeAttribute(name) {
      classAttributes = classAttributes.filter(a => a.name !== name);
      renderAttributesList();
      updateGeneratedCode();
    }

    function removeMethod(name) {
      classMethods = classMethods.filter(m => m !== name);
      renderMethodsList();
      updateGeneratedCode();
    }

    function renderAttributesList() {
      const list = document.getElementById('attributes-list');
      list.innerHTML = classAttributes.map(attr => `
        <div class="item-tag">
          <span>${attr.name}: ${attr.type}</span>
          <button class="remove-btn" onclick="removeAttribute('${attr.name}')">&times;</button>
        </div>
      `).join('');
    }

    function renderMethodsList() {
      const list = document.getElementById('methods-list');
      list.innerHTML = classMethods.map(method => `
        <div class="item-tag">
          <span>${method}()</span>
          <button class="remove-btn" onclick="removeMethod('${method}')">&times;</button>
        </div>
      `).join('');
    }

    function updateGeneratedCode() {
      const className = document.getElementById('class-name-input').value.trim() || 'MyClass';
      const codeEl = document.getElementById('generated-code');

      let code = `class ${className}:\n`;

      // __init__ method
      const initParams = classAttributes.map(a => a.name).join(', ');
      code += `    def __init__(self${initParams ? ', ' + initParams : ''}):\n`;

      if (classAttributes.length === 0) {
        code += `        pass\n`;
      } else {
        classAttributes.forEach(attr => {
          code += `        self.${attr.name} = ${attr.name}\n`;
        });
      }

      // Other methods
      classMethods.forEach(method => {
        code += `\n    def ${method}(self):\n`;
        code += `        # TODO: implement ${method}\n`;
        code += `        pass\n`;
      });

      codeEl.textContent = code;
    }

    function resetBuilder() {
      classAttributes = [];
      classMethods = [];
      document.getElementById('class-name-input').value = 'Student';
      renderAttributesList();
      renderMethodsList();
      updateGeneratedCode();
    }

    function loadExample() {
      classAttributes = [
        { name: 'name', type: 'str' },
        { name: 'age', type: 'int' },
        { name: 'gpa', type: 'float' }
      ];
      classMethods = ['study', 'take_exam', 'get_grade'];
      document.getElementById('class-name-input').value = 'Student';
      renderAttributesList();
      renderMethodsList();
      updateGeneratedCode();
    }

    // Initialize builder
    document.getElementById('class-name-input').addEventListener('input', updateGeneratedCode);
    updateGeneratedCode();

    // ==========================================
    // Object Instantiation Animator
    // ==========================================
    class InitAnimator {
      constructor() {
        this.steps = [
          {
            line: 7,
            desc: 'Call BankAccount("Alice", 1000) - Python creates a new object in memory',
            memory: { acc: '<BankAccount object>', owner: '-', balance: '-' },
            highlight: []
          },
          {
            line: 2,
            desc: 'Python automatically calls __init__ with self=new object, owner="Alice", balance=1000',
            memory: { acc: '<BankAccount object>', owner: '-', balance: '-' },
            highlight: ['self']
          },
          {
            line: 3,
            desc: 'self.owner = owner assigns "Alice" to the object\'s owner attribute',
            memory: { acc: '<BankAccount object>', owner: '"Alice"', balance: '-' },
            highlight: ['owner']
          },
          {
            line: 4,
            desc: 'self.balance = balance assigns 1000 to the object\'s balance attribute',
            memory: { acc: '<BankAccount object>', owner: '"Alice"', balance: '1000' },
            highlight: ['balance']
          },
          {
            line: 7,
            desc: '__init__ complete! The new object is assigned to variable acc',
            memory: { acc: '<BankAccount object>', owner: '"Alice"', balance: '1000' },
            highlight: []
          }
        ];
        this.currentStep = 0;
        this.isPlaying = false;
        this.speed = 1;
        this.intervalId = null;

        this.render();
        this.bindEvents();
      }

      render() {
        const step = this.steps[this.currentStep];

        // Update code highlighting
        document.querySelectorAll('#init-code .code-line').forEach(line => {
          line.classList.remove('highlighted', 'executed');
          const lineNum = parseInt(line.dataset.line);
          if (lineNum === step.line) {
            line.classList.add('highlighted');
          } else if (lineNum < step.line) {
            line.classList.add('executed');
          }
        });

        // Update variables
        document.getElementById('var-acc').textContent = step.memory.acc;
        document.getElementById('var-owner').textContent = step.memory.owner;
        document.getElementById('var-balance').textContent = step.memory.balance;

        // Update description
        document.getElementById('init-description').textContent = step.desc;

        // Update memory visualization
        this.renderMemory(step);

        // Update progress
        const progress = this.steps.length > 1 ? (this.currentStep / (this.steps.length - 1)) * 100 : 0;
        document.getElementById('init-progress').style.width = `${progress}%`;
        document.getElementById('init-step-indicator').textContent = `Step ${this.currentStep + 1} of ${this.steps.length}`;
      }

      renderMemory(step) {
        const container = document.getElementById('init-memory');
        container.innerHTML = `
          <div class="memory-section">
            <h4>Memory Allocation</h4>
            <div class="memory-block ${this.currentStep > 0 ? 'active' : ''}" style="border-left-color: var(--instance-color);">
              <div class="memory-block-header">
                <span>acc</span>
                <span class="type">BankAccount</span>
              </div>
              <div class="memory-attr ${step.highlight.includes('owner') ? 'changed' : ''}">
                <span class="name">owner</span>
                <span class="value">${step.memory.owner}</span>
              </div>
              <div class="memory-attr ${step.highlight.includes('balance') ? 'changed' : ''}">
                <span class="name">balance</span>
                <span class="value">${step.memory.balance}</span>
              </div>
            </div>
          </div>
          <div class="memory-section">
            <h4>Parameters</h4>
            <div class="memory-block class-block ${step.highlight.includes('self') ? 'active' : ''}">
              <div class="memory-block-header">
                <span>__init__ parameters</span>
              </div>
              <div class="memory-attr">
                <span class="name">self</span>
                <span class="value">${this.currentStep > 0 ? '-> acc' : '-'}</span>
              </div>
              <div class="memory-attr">
                <span class="name">owner</span>
                <span class="value">${this.currentStep > 0 ? '"Alice"' : '-'}</span>
              </div>
              <div class="memory-attr">
                <span class="name">balance</span>
                <span class="value">${this.currentStep > 0 ? '1000' : '-'}</span>
              </div>
            </div>
          </div>
        `;
      }

      play() {
        if (this.currentStep >= this.steps.length - 1) this.reset();
        this.isPlaying = true;
        document.getElementById('init-play').textContent = 'Pause';
        document.getElementById('init-play').classList.add('playing');

        this.intervalId = setInterval(() => {
          if (this.currentStep < this.steps.length - 1) {
            this.stepForward();
          } else {
            this.pause();
          }
        }, 1500 / this.speed);
      }

      pause() {
        this.isPlaying = false;
        clearInterval(this.intervalId);
        document.getElementById('init-play').textContent = 'Play';
        document.getElementById('init-play').classList.remove('playing');
      }

      stepForward() {
        if (this.currentStep < this.steps.length - 1) {
          this.currentStep++;
          this.render();
        }
      }

      stepBackward() {
        if (this.currentStep > 0) {
          this.currentStep--;
          this.render();
        }
      }

      reset() {
        this.pause();
        this.currentStep = 0;
        this.render();
      }

      setSpeed(speed) {
        this.speed = speed;
        if (this.isPlaying) {
          this.pause();
          this.play();
        }
      }

      bindEvents() {
        document.getElementById('init-play').addEventListener('click', () => {
          this.isPlaying ? this.pause() : this.play();
        });
        document.getElementById('init-reset').addEventListener('click', () => this.reset());
        document.getElementById('init-back').addEventListener('click', () => this.stepBackward());
        document.getElementById('init-forward').addEventListener('click', () => this.stepForward());
        document.getElementById('init-speed').addEventListener('change', (e) => {
          this.setSpeed(parseFloat(e.target.value));
        });
      }
    }

    const initAnimator = new InitAnimator();

    // ==========================================
    // Instance vs Class Attributes Demo
    // ==========================================
    function changeClassAttr() {
      const newBankName = '"Super Bank"';
      document.getElementById('class-bank-name').textContent = newBankName;
      document.getElementById('acc1-bank-name').textContent = newBankName;
      document.getElementById('acc2-bank-name').textContent = newBankName;
      document.getElementById('acc3-bank-name').textContent = newBankName;

      // Highlight all
      document.querySelectorAll('.class-attr-section').forEach(el => {
        el.style.animation = 'attr-flash 0.5s ease';
        setTimeout(() => el.style.animation = '', 500);
      });

      document.getElementById('attrs-description').textContent =
        'Changed class attribute bank_name - ALL instances now show "Super Bank"!';
    }

    function changeInstanceAttr() {
      const newBalance = Math.floor(Math.random() * 2000) + 500;
      document.getElementById('acc1-balance').textContent = newBalance;

      document.getElementById('attrs-description').textContent =
        `Changed account1's balance to ${newBalance} - only account1 is affected!`;
    }

    function resetAttrsDemo() {
      document.getElementById('class-bank-name').textContent = '"Python Bank"';
      document.getElementById('acc1-bank-name').textContent = '"Python Bank"';
      document.getElementById('acc2-bank-name').textContent = '"Python Bank"';
      document.getElementById('acc3-bank-name').textContent = '"Python Bank"';
      document.getElementById('acc1-balance').textContent = '1000';
      document.getElementById('acc2-balance').textContent = '500';
      document.getElementById('acc3-balance').textContent = '750';
      document.getElementById('attrs-description').textContent =
        'Watch how class attributes are shared while instance attributes are unique';
    }

    // ==========================================
    // Self Parameter Binding Visualizer
    // ==========================================
    class SelfAnimator {
      constructor() {
        this.steps = [
          {
            desc: 'We call account1.deposit(100) on our object',
            call: 'account1.deposit(100)',
            selfValue: '?',
            amountValue: '?',
            balance: '1000',
            line: 11
          },
          {
            desc: 'Python translates this to BankAccount.deposit(account1, 100)',
            call: 'BankAccount.deposit(account1, 100)',
            selfValue: 'account1',
            amountValue: '100',
            balance: '1000',
            line: 6
          },
          {
            desc: 'Inside the method, self refers to account1, amount is 100',
            call: 'BankAccount.deposit(account1, 100)',
            selfValue: 'account1',
            amountValue: '100',
            balance: '1000',
            line: 7
          },
          {
            desc: 'self.balance += amount means account1.balance += 100',
            call: 'BankAccount.deposit(account1, 100)',
            selfValue: 'account1',
            amountValue: '100',
            balance: '1100',
            line: 7
          },
          {
            desc: 'Method complete! account1.balance is now 1100',
            call: 'account1.deposit(100)',
            selfValue: 'account1',
            amountValue: '100',
            balance: '1100',
            line: 8
          }
        ];
        this.currentStep = 0;
        this.isPlaying = false;
        this.intervalId = null;

        this.render();
        this.bindEvents();
      }

      render() {
        const step = this.steps[this.currentStep];

        document.getElementById('self-description').textContent = step.desc;
        document.getElementById('self-call').textContent = step.call;
        document.getElementById('self-value').textContent = step.selfValue;
        document.getElementById('amount-value').textContent = step.amountValue;
        document.getElementById('self-balance-value').textContent = step.balance;

        // Update code highlighting
        document.querySelectorAll('#self-code .code-line').forEach(line => {
          line.classList.remove('highlighted', 'executed');
          const lineNum = parseInt(line.dataset.line);
          if (lineNum === step.line) {
            line.classList.add('highlighted');
          }
        });

        // Update progress
        const progress = this.steps.length > 1 ? (this.currentStep / (this.steps.length - 1)) * 100 : 0;
        document.getElementById('self-progress').style.width = `${progress}%`;
        document.getElementById('self-step-indicator').textContent = `Step ${this.currentStep + 1} of ${this.steps.length}`;
      }

      play() {
        if (this.currentStep >= this.steps.length - 1) this.reset();
        this.isPlaying = true;
        document.getElementById('self-play').textContent = 'Pause';
        document.getElementById('self-play').classList.add('playing');

        this.intervalId = setInterval(() => {
          if (this.currentStep < this.steps.length - 1) {
            this.stepForward();
          } else {
            this.pause();
          }
        }, 2000);
      }

      pause() {
        this.isPlaying = false;
        clearInterval(this.intervalId);
        document.getElementById('self-play').textContent = 'Play';
        document.getElementById('self-play').classList.remove('playing');
      }

      stepForward() {
        if (this.currentStep < this.steps.length - 1) {
          this.currentStep++;
          this.render();
        }
      }

      stepBackward() {
        if (this.currentStep > 0) {
          this.currentStep--;
          this.render();
        }
      }

      reset() {
        this.pause();
        this.currentStep = 0;
        this.render();
      }

      bindEvents() {
        document.getElementById('self-play').addEventListener('click', () => {
          this.isPlaying ? this.pause() : this.play();
        });
        document.getElementById('self-reset').addEventListener('click', () => this.reset());
        document.getElementById('self-back').addEventListener('click', () => this.stepBackward());
        document.getElementById('self-forward').addEventListener('click', () => this.stepForward());
      }
    }

    const selfAnimator = new SelfAnimator();

    // ==========================================
    // Encapsulation Tabs
    // ==========================================
    function switchTab(tabId) {
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

      document.querySelector(`[onclick="switchTab('${tabId}')"]`).classList.add('active');
      document.getElementById(`tab-${tabId}`).classList.add('active');
    }

    // ==========================================
    // Quiz Functionality with Progressive Hints
    // ==========================================
    const quizHints = {
      1: [
        'Think about what happens when you create a new object',
        'Consider what "initialize" means in programming'
      ],
      2: [
        'Think about what object is "calling" the method',
        'When you write account1.deposit(), what is account1 inside the method?'
      ],
      3: [
        'Is bank_name a class attribute or instance attribute?',
        'Class attributes are shared - when you change the class attribute, what happens to instances?'
      ],
      4: [
        'Think about underscore prefixes',
        'How many underscores are used for protected vs private?'
      ],
      5: [
        'Each time __init__ runs, what happens to Counter.count?',
        'How many Counter objects are created?'
      ]
    };

    function showHint(btn, hintIndex) {
      const quizQuestion = btn.closest('.quiz-question');
      const questionNum = parseInt(quizQuestion.id.split('-')[1]);
      const hintEl = document.getElementById(`hint-${questionNum}-${hintIndex}`);

      hintEl.textContent = quizHints[questionNum][hintIndex];
      hintEl.classList.add('show');
      btn.style.display = 'none';

      // Show next hint button if available
      if (hintIndex === 0 && quizHints[questionNum].length > 1) {
        document.getElementById(`hint-btn-${questionNum}-1`).style.display = 'inline';
      }
    }

    // Quiz option click handlers
    document.querySelectorAll('.quiz-options').forEach(optionsContainer => {
      const options = optionsContainer.querySelectorAll('.quiz-option');
      const correct = parseInt(optionsContainer.dataset.correct);
      const explanation = optionsContainer.parentElement.querySelector('.quiz-explanation');

      options.forEach((option, index) => {
        option.addEventListener('click', () => {
          options.forEach(o => o.classList.remove('selected', 'correct', 'incorrect'));
          option.classList.add('selected');

          if (index === correct) {
            option.classList.add('correct');
          } else {
            option.classList.add('incorrect');
            options[correct].classList.add('correct');
          }

          explanation.classList.add('show');
        });
      });
    });

    // ==========================================
    // Keyboard Shortcuts
    // ==========================================
    document.addEventListener('keydown', (e) => {
      if (e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT' || e.target.tagName === 'TEXTAREA') return;

      switch(e.key) {
        case ' ':
          e.preventDefault();
          // Toggle the currently visible animator
          break;
        case 'ArrowRight':
          initAnimator.stepForward();
          break;
        case 'ArrowLeft':
          initAnimator.stepBackward();
          break;
      }
    });

    // ==========================================
    // KaTeX auto-render
    // ==========================================
    document.addEventListener('DOMContentLoaded', () => {
      if (typeof renderMathInElement !== 'undefined') {
        renderMathInElement(document.body, {
          delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false}
          ]
        });
      }
    });
  </script>
</body>
</html>
